<!-- uploaded file (dev instruction): /mnt/data/c7b57b0b-8bed-4241-9f20-90132a36ebf8.png -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sudoku â€” Clean Modern</title>
  <style>
    :root{
      --bg: #F6F7F8;
      --card: #FFFFFF;
      --muted: #9AA39A;
      --fg: #0F2614;
      --accent: #246B3B;         /* primary UI color */
      --accent-2: #5FA86B;       /* secondary */
      --glass: rgba(255,255,255,0.72);
      --shadow-sm: 0 6px 20px rgba(15,18,20,0.06);
      --shadow-lg: 0 24px 48px rgba(8,12,14,0.08);
      --cell: #FBFDF9;
      --given: #EDF7EE;
      --success: rgba(37,135,70,0.10);
      --danger: rgba(190,50,50,0.08);
      --focus: rgba(37,135,70,0.12);
      --board-size: 400px;      /* selected size */
    }

    /* ---------- Base ---------- */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: Inter, "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--bg);
      color:var(--fg);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:36px 20px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      width:100%;
      max-width:1120px;
      display:flex;
      gap:28px;
      align-items:flex-start;
      justify-content:center;
      position:relative;
    }

    .wrap::before{
      content:'';
      position:absolute;
      left:50%; transform:translateX(-50%);
      top:0;
      height:100%;
      width:calc(50% + 260px);
      background:var(--glass);
      border-radius:18px;
      filter: blur(8px);
      z-index:0;
      pointer-events:none;
      opacity:0.98;
    }

    /* ---------- Card ---------- */
    .card{
      width:520px;
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow:var(--shadow-lg);
      border:1px solid rgba(0,0,0,0.03);
      position:relative;
      z-index:1;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .header{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .title-wrap{ display:flex; flex-direction:column; gap:2px; }
    .title{ font-weight:800; font-size:18px; letter-spacing:-0.2px; }
    .subtitle{ font-size:12px; color:var(--muted); font-weight:700; }

    .meta{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-top:6px; }
    .lives{ display:flex; align-items:center; gap:8px; color:var(--muted); font-weight:700; }
    .hearts{ display:flex; gap:6px; }
    .heart{ width:12px; height:12px; border-radius:3px; background:var(--accent-2);
      mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="M12 21s-7-4.35-9.17-7.09C1.25 11.97 2.4 8.5 5.5 7.5 7 6.9 8.5 7.5 9 8.6 9.5 7.5 11 6.9 12.5 7.5c3.1 1 4.25 4.47 2.67 6.41C19 16.65 12 21 12 21z"/></svg>') center / contain no-repeat;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.06);
    }

    /* ---------- Board (400px) ---------- */
    .board-wrap{ display:flex; justify-content:center; align-items:center; padding:8px; }
    .sudoku{
      width:var(--board-size);
      height:var(--board-size);
      display:grid;
      grid-template-columns:repeat(9,1fr);
      grid-template-rows:repeat(9,1fr);
      border-radius:10px;
      overflow:visible;
      background:var(--cell);
      user-select:none;
      position:relative;
      box-shadow: 0 8px 20px rgba(8,12,14,0.03) inset;
      border:1px solid rgba(0,0,0,0.03);
    }

    /* thinner, sleeker lines */
    .sudoku .cell{
      display:flex; align-items:center; justify-content:center; padding:0;
      font-weight:700; font-size:1.02rem; color:var(--fg);
      border-right:1px solid rgba(12,22,12,0.045);
      border-bottom:1px solid rgba(12,22,12,0.045);
      transition: box-shadow 140ms ease, background 120ms ease;
      min-width:0; min-height:0; position:relative; background:transparent;
    }
    .sudoku .cell:nth-child(9n){ border-right:0; }
    .sudoku .cell:nth-last-child(-n+9){ border-bottom:0; }
    .sudoku .cell:nth-child(3n){ border-right:1.2px solid rgba(12,22,12,0.08); }
    .sudoku .cell:nth-child(n + 19):nth-child(-n + 27),
    .sudoku .cell:nth-child(n + 46):nth-child(-n + 54){ border-bottom:1.2px solid rgba(12,22,12,0.08); }

    .cell.given{ background:var(--given); color:var(--fg); opacity:0.98; pointer-events:none; }
    .cell.correct{ background:var(--success); }
    .cell.wrong{ background:var(--danger); }

    .cell input.value{
      width:100%; height:100%; border:0; background:transparent; text-align:center;
      font-weight:800; font-size:1.05rem; caret-color:var(--accent-2);
      outline:none; -webkit-appearance:none; appearance:none; border-radius:0; padding-top:2px; color:inherit;
    }
    .cell input.value::-moz-focus-inner{ border:0; padding:0; }
    .cell input.value:focus{ outline:none; box-shadow:none; }

    .cell:hover:not(.given){ background: rgba(37,135,70,0.02); box-shadow: 0 6px 16px rgba(8,12,14,0.04); z-index:2; }
    .cell.active{ box-shadow: 0 14px 36px rgba(8,12,14,0.06); outline: 3px solid var(--focus); z-index:3; }

    /* ---------- Controls & numpad ---------- */
    .controls{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-top:6px; padding-top:6px; }
    .controls .left, .controls .right{ display:flex; gap:8px; align-items:center; }
    .btn{ background:var(--accent); color:white; padding:9px 12px; border-radius:10px; font-weight:800; border:0; cursor:pointer; box-shadow:0 8px 18px rgba(36,107,59,0.10); transition: transform 120ms ease, opacity 120ms ease; }
    .btn.ghost{ background:transparent; color:var(--fg); border:1px solid rgba(0,0,0,0.04); box-shadow:none; font-weight:700; }
    .btn.small{ padding:8px 10px; font-size:0.92rem; }

    /* hint pill: solid color, less border radius (6px) */
    .hint-pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      border-radius:6px;                 /* 6px as requested */
      background: var(--accent);         /* solid primary color */
      color: #fff;
      font-weight:800;
      box-shadow: 0 8px 24px rgba(36,107,59,0.12);
      cursor:pointer;
      border: 0;
    }
    .hint-pill .icon{
      width:18px; height:18px; border-radius:6px; background: rgba(255,255,255,0.12); display:inline-flex; align-items:center; justify-content:center; font-size:12px;
    }

    .message{ font-size:13px; color:var(--muted); text-align:center; padding:6px 0 2px 0; }

    .aside{ width:340px; display:flex; align-items:center; justify-content:center; min-height: calc(100vh - 160px); z-index:1; }
    .numpad{ width:300px; padding:14px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.88)); box-shadow:var(--shadow-sm); border:1px solid rgba(0,0,0,0.03);
      display:grid; grid-template-columns:repeat(3,1fr); gap:12px; align-items:center; justify-items:stretch; }

    .numpad button{ border-radius:10px; padding:12px; background:var(--accent); color:white; font-weight:800; font-size:1.0rem; border:0; cursor:pointer; transition: transform 120ms ease; box-shadow:none; }
    .numpad button.action{ background:transparent; color:var(--fg); border:1px solid rgba(0,0,0,0.04); font-weight:700; }

    @media (max-width:940px){
      body{ padding:20px; }
      .wrap{ gap:14px; flex-direction:column; align-items:center; max-width:880px; }
      .wrap::before{ width:92%; }
      .card{ width:92vw; max-width:620px; }
      .sudoku{ width:92vw; max-width:420px; height:92vw; }
      .aside{ width:92vw; min-height:auto; }
      .numpad{ width:92vw; max-width:420px; grid-template-columns: repeat(3, 1fr); }
    }

    @media (prefers-reduced-motion:reduce){ *{ transition:none!important; } }

    button:focus, input:focus{ outline:none; }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Sudoku game">
    <div class="card" aria-live="polite">
      <div class="header">
        <div class="title-wrap">
          <div class="title">Sudoku</div>
          <div class="subtitle">Clean â€¢ Focused â€¢ Modern</div>
        </div>
        <div style="width:84px"></div>
      </div>

      <div class="meta">
        <div class="lives">Lives: <strong id="lives">3</strong> <span class="hearts" id="livesText"><span class="heart"></span><span class="heart"></span><span class="heart"></span></span></div>
        <div id="hintPill" class="hint-pill" role="button" aria-pressed="false" title="Get a hint">
          <span class="icon">ðŸ’¡</span>
          <span>Hint (<span id="hintCount">3</span>)</span>
        </div>
      </div>

      <div class="board-wrap">
        <div id="sudoku" class="sudoku" tabindex="0" aria-label="Sudoku board"></div>
      </div>

      <div class="controls">
        <div class="left">
          <button id="newBtn" class="btn">New Puzzle</button>
          <button id="solveBtn" class="btn ghost small">Show Solution</button>
          <button id="clearBtn2" class="btn ghost small">Clear</button>
        </div>
        <div class="right">
          <button id="undoBtn" class="btn ghost small">Undo</button>
          <button id="redoBtn" class="btn ghost small">Redo</button>
        </div>
      </div>

      <div class="message" id="message" aria-live="polite"></div>
    </div>

    <aside class="aside" aria-label="Number pad">
      <div id="numpad" class="numpad" role="toolbar" aria-label="Number pad">
        <button data-n="1">1</button><button data-n="2">2</button><button data-n="3">3</button>
        <button data-n="4">4</button><button data-n="5">5</button><button data-n="6">6</button>
        <button data-n="7">7</button><button data-n="8">8</button><button data-n="9">9</button>
        <button class="action" id="clearBtn">Clear</button>
        <button class="action" id="hintBtnMain">Hint</button>
        <button class="action" id="backBtn">âŒ«</button>
      </div>
    </aside>
  </div>

  <script>
    /* Clean sudoku (theme removed, hint pill solid, no pencil notes) */
    const SIZE = 9;
    let board = [];
    let solution = [];
    let initial = [];
    let lives = 3;
    let hintsLeft = 3;
    let selectedCell = null;
    let historyStack = [];
    let redoStack = [];

    const sudokuEl = document.getElementById('sudoku');
    const livesText = document.getElementById('livesText');
    const livesNum = document.getElementById('lives');
    const messageEl = document.getElementById('message');
    const hintCountEl = document.getElementById('hintCount');
    const hintPill = document.getElementById('hintPill');

    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr; }
    function fillBox(br,bc){ const nums = shuffle([1,2,3,4,5,6,7,8,9]); for(let r=0;r<3;r++) for(let c=0;c<3;c++) board[br+r][bc+c]=nums[r*3+c]; }
    function isValid(b,r,c,n){ for(let i=0;i<SIZE;i++){ if(b[r][i]===n || b[i][c]===n) return false; } const sr=r-r%3, sc=c-c%3; for(let i=0;i<3;i++) for(let j=0;j<3;j++) if(b[sr+i][sc+j]===n) return false; return true; }
    function solve(b){ for(let r=0;r<SIZE;r++){ for(let c=0;c<SIZE;c++){ if(b[r][c]===0){ for(let n=1;n<=9;n++){ if(isValid(b,r,c,n)){ b[r][c]=n; if(solve(b)) return true; b[r][c]=0; } } return false; } } } return true; }
    function removeCells(count){ let removed=0; while(removed<count){ const r=Math.floor(Math.random()*SIZE); const c=Math.floor(Math.random()*SIZE); if(board[r][c]!==0){ board[r][c]=0; removed++; } } }
    function generateRandomPuzzle(){ board = Array.from({length:SIZE},()=>Array(SIZE).fill(0)); for(let k=0;k<SIZE;k+=3) fillBox(k,k); solve(board); solution = board.map(r=>r.slice()); removeCells(50 + Math.floor(Math.random()*6)); initial = board.map(r=>r.slice()); }

    function initGrid(){
      sudokuEl.innerHTML='';
      for(let r=0;r<SIZE;r++){
        for(let c=0;c<SIZE;c++){
          const cell = document.createElement('div');
          cell.className='cell';
          cell.dataset.r=r; cell.dataset.c=c;
          const val = board[r][c];
          if(val!==0){
            const input = document.createElement('input'); input.className='value'; input.value=val; input.disabled=true;
            input.setAttribute('aria-label', `Cell ${r+1}-${c+1}`); cell.appendChild(input); cell.classList.add('given');
          } else {
            const input = document.createElement('input'); input.className='value';
            input.type='text'; input.inputMode='numeric'; input.maxLength=1; input.autocomplete='off';
            input.style.display='block';
            input.setAttribute('aria-label', `Cell ${r+1}-${c+1}`);
            input.addEventListener('focus', ()=>setSelected(cell,r,c));
            input.addEventListener('click', ()=>setSelected(cell,r,c));
            input.addEventListener('input', ()=>handleInput(input,r,c));
            input.addEventListener('keydown', onCellKeyDown);
            cell.appendChild(input);
          }
          sudokuEl.appendChild(cell);
        }
      }
    }

    function setSelected(el,row,col){
      document.querySelectorAll('.sudoku .cell').forEach(c=>c.classList.remove('active'));
      el.classList.add('active');
      selectedCell={row,col,el};
      const inp = el.querySelector('input.value'); if(inp) inp.focus();
    }

    function onCellKeyDown(e){
      if(!selectedCell) return;
      const r=selectedCell.row, c=selectedCell.col;
      if(e.key==='ArrowUp'){ e.preventDefault(); focusCell(Math.max(0,r-1),c); }
      if(e.key==='ArrowDown'){ e.preventDefault(); focusCell(Math.min(8,r+1),c); }
      if(e.key==='ArrowLeft'){ e.preventDefault(); focusCell(r,Math.max(0,c-1)); }
      if(e.key==='ArrowRight'){ e.preventDefault(); focusCell(r,Math.min(8,c+1)); }
      if(e.key==='Backspace' || e.key==='Delete'){ e.preventDefault(); clearSelected(); }
      if(e.key>='1' && e.key<='9'){ const n=parseInt(e.key); const inp=selectedCell.el.querySelector('input.value'); if(inp) { inp.value=n; handleInput(inp,r,c); } }
    }

    function focusCell(r,c){ const idx=r*9+c; const target=sudokuEl.children[idx]; if(target){ const inp=target.querySelector('input.value'); setSelected(target,r,c); if(inp) inp.focus(); } }

    function handleInput(input,row,col){
      const val = parseInt(input.value);
      if(isNaN(val) || val<1 || val>9){ input.value=''; return; }
      if(val===solution[row][col]){
        input.disabled=true;
        input.parentElement.classList.add('correct');
        input.parentElement.classList.remove('active');
        pushHistory({type:'fill',row,col,prev:0,new:val});
        selectedCell=null;
      } else {
        lives--; updateLives();
        input.parentElement.classList.add('wrong');
        setTimeout(()=>{ input.parentElement.classList.remove('wrong'); input.value=''; },500);
        if(lives<=0){ showMessage('ðŸ’€ Game Over â€” new puzzle loading...','error'); setTimeout(()=>newPuzzle(),1200); }
      }
    }

    function clearSelected(){
      if(!selectedCell) return;
      const inp = selectedCell.el.querySelector('input.value');
      if(inp && !inp.disabled) inp.value='';
    }

    function updateLives(){ livesText.innerHTML=''; for(let i=0;i<lives;i++){ const h=document.createElement('span'); h.className='heart'; livesText.appendChild(h);} document.getElementById('lives').textContent=lives; }

    function showMessage(text,type='info'){ messageEl.textContent=text; if(type!=='error') setTimeout(()=>{ if(messageEl.textContent===text) messageEl.textContent=''; },1300); }

    function giveHint(){
      if(hintsLeft<=0){ showMessage('No hints left!','error'); return; }
      if(!selectedCell){ showMessage('Select a cell first!','error'); return; }
      const r=selectedCell.row, c=selectedCell.col;
      if(board[r][c]!==0){ showMessage('Cell already filled!','error'); return; }
      const inp = selectedCell.el.querySelector('input.value');
      inp.value = solution[r][c];
      inp.disabled = true;
      selectedCell.el.classList.add('correct');
      pushHistory({type:'hint',row:r,col:c,prev:0,new:solution[r][c]});
      selectedCell=null;
      hintsLeft--; updateHintDisplay();
    }

    function updateHintDisplay(){ hintCountEl.textContent=hintsLeft; }

    function pushHistory(act){ historyStack.push(act); if(historyStack.length>300) historyStack.shift(); redoStack=[]; }
    function undo(){ if(historyStack.length===0){ showMessage('Nothing to undo'); return; } const act=historyStack.pop(); redoStack.push(JSON.parse(JSON.stringify(act))); if(act.type==='fill' || act.type==='hint'){ const idx=act.row*9+act.col; const cell=sudokuEl.children[idx]; const inp=cell.querySelector('input.value'); inp.value = act.prev || ''; inp.disabled = !!(act.prev && act.prev!==0); cell.classList.toggle('correct', inp.disabled); } }
    function redo(){ if(redoStack.length===0){ showMessage('Nothing to redo'); return; } const act=redoStack.pop(); historyStack.push(JSON.parse(JSON.stringify(act))); if(act.type==='fill' || act.type==='hint'){ const idx=act.row*9+act.col; const cell=sudokuEl.children[idx]; const inp=cell.querySelector('input.value'); inp.value = act.new || ''; inp.disabled = !!(act.new && act.new!==0); cell.classList.toggle('correct', inp.disabled); } }

    function revealSolution(){ for(let r=0;r<9;r++){ for(let c=0;c<9;c++){ const idx=r*9+c; const cell=sudokuEl.children[idx]; const inp=cell.querySelector('input.value'); inp.value = solution[r][c]; inp.disabled=true; cell.classList.add('correct'); } } }
    function newPuzzle(){ lives=3; hintsLeft=3; historyStack=[]; redoStack=[]; updateLives(); updateHintDisplay(); generateRandomPuzzle(); initGrid(); showMessage('New puzzle â€” good luck!'); selectedCell=null; }
    function clearAll(){ for(let i=0;i<81;i++){ const cell=sudokuEl.children[i]; const inp=cell.querySelector('input.value'); if(inp && !inp.disabled) inp.value=''; cell.classList.remove('correct','wrong','active'); } historyStack=[]; redoStack=[]; }

    // numpad interactions
    document.getElementById('numpad').addEventListener('click',(e)=>{
      const btn = e.target.closest('button'); if(!btn) return;
      const n = btn.dataset.n;
      if(btn.id==='clearBtn'){ clearSelected(); return; }
      if(btn.id==='backBtn'){ clearSelected(); return; }
      if(btn.id==='hintBtnMain'){ giveHint(); return; }
      if(n){ if(!selectedCell){ showMessage('Select a cell first!','error'); return; } const inp=selectedCell.el.querySelector('input.value'); if(inp && !inp.disabled){ inp.value = n; handleInput(inp, selectedCell.row, selectedCell.col); } }
    });

    // controls
    document.getElementById('newBtn').addEventListener('click', newPuzzle);
    document.getElementById('solveBtn').addEventListener('click', ()=>{ revealSolution(); showMessage('Solution revealed'); });
    document.getElementById('undoBtn').addEventListener('click', undo);
    document.getElementById('redoBtn').addEventListener('click', redo);
    document.getElementById('clearBtn2').addEventListener('click', clearAll);
    hintPill.addEventListener('click', giveHint);
    document.getElementById('hintBtnMain').addEventListener('click', giveHint);

    // init
    generateRandomPuzzle();
    initGrid();
    updateLives();
    updateHintDisplay();
    focusFirstEmpty();

    window.sudoku = { newPuzzle, revealSolution, getBoard: ()=>board.map(r=>r.slice()), getSolution: ()=>solution.map(r=>r.slice()) };

    document.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' && !selectedCell) focusFirstEmpty(); });

    // helpers
    function focusFirstEmpty(){ for(let r=0;r<9;r++) for(let c=0;c<9;c++) if(board[r][c]===0){ focusCell(r,c); return; } }
    function focusCell(r,c){ const idx=r*9+c; const target=sudokuEl.children[idx]; if(target){ const inp=target.querySelector('input.value'); setSelected(target,r,c); if(inp) inp.focus(); } }
  </script>
</body>
</html>
